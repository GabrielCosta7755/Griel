<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo Ninja 2D: Rumo ao Hokage</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #f0f0f0;
        }
        canvas {
            display: block;
        }
        #controls {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: space-around;
            width: 200px;
        }
        .button {
            background: #4CAF50;
            border: none;
            border-radius: 5px;
            color: white;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
        }
        .button:hover {
            background: #45a049;
        }
        #nameInput, #startButton, #gameStatus {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        #nameInput, #startButton {
            display: none;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="nameInput">
        <input type="text" id="playerName" placeholder="Escolha seu nome" />
        <button class="button" onclick="startGame()">Começar Jogo</button>
    </div>
    <div id="startButton">
        <button class="button" onclick="showNameInput()">Escolher Nome</button>
    </div>
    <div id="gameStatus"></div>
    <div id="controls">
        <button class="button" id="up">↑</button>
        <button class="button" id="left">←</button>
        <button class="button" id="right">→</button>
        <button class="button" id="down">↓</button>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const ninjaImage = new Image();
        ninjaImage.src = 'ninja.png'; // Caminho para a imagem do ninja

        const itemImage = new Image();
        itemImage.src = 'item.png'; // Caminho para a imagem do item

        const ninja = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            width: 50,
            height: 50,
            speed: 5
        };

        const item = {
            x: Math.random() * (canvas.width - 30),
            y: Math.random() * (canvas.height - 30),
            width: 30,
            height: 30
        };

        let playerName = '';
        let level = 0;
        let stories = [
            "Você começou sua jornada ninja. Encontre o item para avançar para a próxima fase.",
            "Você enfrentou seu primeiro desafio. Continue sua busca para se tornar mais forte.",
            "Você derrotou um inimigo poderoso. A próxima fase será ainda mais difícil.",
            "Você provou sua bravura em batalhas. Quase lá, apenas mais um desafio para se tornar um grande ninja.",
            "Você completou todos os desafios. Parabéns! Você se tornou o Hokage!"
        ];

        function drawNinja() {
            ctx.drawImage(ninjaImage, ninja.x, ninja.y, ninja.width, ninja.height);
        }

        function drawItem() {
            ctx.drawImage(itemImage, item.x, item.y, item.width, item.height);
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawNinja();
            drawItem();
            checkCollision();
        }

        function checkCollision() {
            if (ninja.x < item.x + item.width &&
                ninja.x + ninja.width > item.x &&
                ninja.y < item.y + item.height &&
                ninja.y + ninja.height > item.y) {
                level++;
                if (level < stories.length) {
                    item.x = Math.random() * (canvas.width - 30);
                    item.y = Math.random() * (canvas.height - 30);
                    showStatus(stories[level]);
                } else {
                    showStatus(`Parabéns, ${playerName}! Você se tornou o Hokage!`);
                    document.getElementById('controls').style.display = 'none';
                }
            }
        }

        function moveNinja(direction) {
            switch (direction) {
                case 'up':
                    ninja.y -= ninja.speed;
                    break;
                case 'down':
                    ninja.y += ninja.speed;
                    break;
                case 'left':
                    ninja.x -= ninja.speed;
                    break;
                case 'right':
                    ninja.x += ninja.speed;
                    break;
            }
            update();
        }

        function showStatus(message) {
            document.getElementById('gameStatus').innerText = message;
        }

        function showNameInput() {
            document.getElementById('nameInput').style.display = 'block';
            document.getElementById('startButton').style.display = 'none';
        }

        function startGame() {
            playerName = document.getElementById('playerName').value;
            if (playerName) {
                document.getElementById('nameInput').style.display = 'none';
                document.getElementById('gameStatus').innerText = stories[level];
                document.getElementById('controls').style.display = 'flex';
                update();
            } else {
                alert('Por favor, escolha um nome!');
            }
        }

        // Eventos de toque para botões
        document.getElementById('up').addEventListener('touchstart', () => moveNinja('up'));
        document.getElementById('down').addEventListener('touchstart', () => moveNinja('down'));
        document.getElementById('left').addEventListener('touchstart', () => moveNinja('left'));
        document.getElementById('right').addEventListener('touchstart', () => moveNinja('right'));

        document.getElementById('up').addEventListener('click', () => moveNinja('up'));
        document.getElementById('down').addEventListener('click', () => moveNinja('down'));
        document.getElementById('left').addEventListener('click', () => moveNinja('left'));
        document.getElementById('right').addEventListener('click', () => moveNinja('right'));

        document.getElementById('startButton').style.display = 'block';
    </script>
</body>
</html>
